<div class="page-container">

  <!-- Header -->
  <div class="header">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>Add New Client</h1>
  </div>

  <!-- Success Message -->
  <div class="message-box success" *ngIf="successMessage">
    <mat-icon>check_circle</mat-icon>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Error Message -->
  <div class="message-box error" *ngIf="errorMessage">
    <mat-icon>error</mat-icon>
    <span>{{ errorMessage }}</span>
    <button mat-icon-button (click)="errorMessage = ''">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Form Card -->
  <mat-card class="form-card">
    <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
      
      <!-- Company Information -->
      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>business</mat-icon>
          Company Information
        </h3>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Company Name *</mat-label>
            <input matInput formControlName="companyName">
            <mat-icon matPrefix>business</mat-icon>
            <mat-error *ngIf="clientForm.get('companyName')?.hasError('required')">
              Required
            </mat-error>
            <mat-error *ngIf="clientForm.get('companyName')?.hasError('minlength')">
              Min 3 characters
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Industry *</mat-label>
            <mat-select formControlName="industry">
              <mat-option *ngFor="let industry of industries" [value]="industry">
                {{ industry }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix>category</mat-icon>
            <mat-error>Required</mat-error>
          </mat-form-field>
        </div>

        <!-- ✅ Conditional Other Industry Field -->
        <div class="form-row" *ngIf="showOtherIndustry">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Specify Industry *</mat-label>
            <input matInput formControlName="otherIndustry" placeholder="Enter industry name">
            <mat-icon matPrefix>edit</mat-icon>
            <mat-hint>Please specify the industry</mat-hint>
            <mat-error *ngIf="clientForm.get('otherIndustry')?.hasError('required')">
              Industry specification is required
            </mat-error>
            <mat-error *ngIf="clientForm.get('otherIndustry')?.hasError('minlength')">
              Min 3 characters
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Annual Turnover (Crores) *</mat-label>
            <input matInput type="number" step="0.1" formControlName="annualTurnover">
            <span matPrefix>₹&nbsp;</span>
            <span matSuffix>&nbsp;Cr</span>
            <mat-error>Required, must be > 0</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Registered Address *</mat-label>
            <textarea matInput formControlName="address" rows="2"></textarea>
            <mat-icon matPrefix>location_on</mat-icon>
            <mat-error *ngIf="clientForm.get('address')?.hasError('required')">
              Required
            </mat-error>
            <mat-error *ngIf="clientForm.get('address')?.hasError('minlength')">
              Min 10 characters
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Primary Contact -->
      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>contact_phone</mat-icon>
          Primary Contact
        </h3>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Contact Name *</mat-label>
            <input matInput formControlName="contactName">
            <mat-icon matPrefix>person</mat-icon>
            <mat-error>Required, min 3 characters</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Email *</mat-label>
            <input matInput type="email" formControlName="contactEmail">
            <mat-icon matPrefix>email</mat-icon>
            <mat-error>Valid email required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Mobile *</mat-label>
            <input matInput formControlName="contactPhone" maxlength="10">
            <mat-icon matPrefix>phone</mat-icon>
            <mat-error>10-digit number (6-9)</mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Documents -->
      <div class="form-section last">
        <mat-checkbox formControlName="documentsSubmitted">
          All required documents submitted
        </mat-checkbox>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button mat-stroked-button type="button" (click)="goBack()" [disabled]="isLoading">
          Cancel
        </button>
        <button mat-stroked-button type="button" (click)="resetForm()" [disabled]="isLoading">
          Reset
        </button>
        <button mat-raised-button color="primary" type="submit" [disabled]="isLoading || clientForm.invalid">
          <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
          <span *ngIf="! isLoading">Create Client</span>
        </button>
      </div>

    </form>
  </mat-card>

</div>